@using Microsoft.AspNetCore.Identity
@using Weather_forecast.ViewModels
@inject SignInManager<Weather_forecast.Models.ApplicationUser> signInManager
@model CityAndApi
@{
    ViewData["Title"] = "Search history";
}

@if (signInManager.IsSignedIn(User))
{
    <div class="text-center">
        <h1 class="display-4">Search history</h1>
        <form asp-action="Index" asp-controller="Home" method="get">
            <button type="submit" style="width:150px; height:30px;">Go back</button>
        </form>
        @if (Model != null)
        {
            int numeration = 1;
            @foreach (City city in Model.Cities)
            {
                string historyCity = numeration.ToString();
                historyCity += $". City name: {city.CityName}, date of search: {city.DateOfSearch}";
                <p>@historyCity</p>
                <form asp-action="CityGet" asp-controller="Home" method="post" style="display:inline">
                    <button style="display:inline; height:30px;" type="submit">Search weather for this city</button>
                </form>
                numeration++;
            }
        }
    </div>
}